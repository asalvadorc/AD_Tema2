<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://asalvadorc.github.io/AD_Tema2/AD_T2_Gesti_del_contingut_de_fitxers/4__simplificaci_en_kotlin/" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>4 - Simplificació en Kotlin - AD - Accés a Dades</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../../css/extra.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "4 - Simplificaci\u00f3 en Kotlin";
        var mkdocs_page_input_path = "AD_T2_Gesti_del_contingut_de_fitxers/4__simplificaci_en_kotlin.md";
        var mkdocs_page_url = "/AD_Tema2/AD_T2_Gesti_del_contingut_de_fitxers/4__simplificaci_en_kotlin/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../..">
          <img src="../../assets/logocaminas.png" class="logo" alt="Logo"/>
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Tema 2- Gestió del contingut de fitxers</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../objectius/">Objectius</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../1__magatzems_i_fluxos_de_dades/">1 - Magatzems i fluxos de dades</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >2 - Manipulació dels fluxos de dades</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../2__manipulaci_dels_fluxos_de_dades/">2 - Manipulació dels fluxos de dades</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" >2.1 - Fluxos orientats a bytes</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../21__fluxos_orientats_a_bytes/">2.1 - Fluxos orientats a bytes</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../211__mtodes_del_inputstream/">2.1.1 - Mètodes del InputStream</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../212__mtodes_del_outputstream/">2.1.2 - Mètodes del OutputStream</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" >2.2 - Fluxos orientats a caràcters</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../22__fluxos_orientats_a_carcters/">2.2 - Fluxos orientats a caràcters</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../221__mtodes_del_reader/">2.2.1 - Mètodes del Reader</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../222__mtodes_del_writer/">2.2.2 - Mètodes del Writer</a>
                </li>
    </ul>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >3 - Fluxos decoradors</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../3__fluxos_decoradors/">3 - Fluxos decoradors</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../31__decoradors_de_inputstream_i_otputstream/">3.1 - Decoradors de InputStream i OtputStream</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../32__decoradors_de_reader_i_writer/">3.2 - Decoradors de Reader i Writer</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../33__conversors_inputstreamreader_i_outputstreamwriter/">3.3 - ConversorsInputStreamReader i OutputStreamWriter</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">4 - Simplificació en Kotlin</a>
    <ul class="current">
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../exercicis/">Exercicis</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">AD - Accés a Dades</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Tema 2- Gestió del contingut de fitxers</li>
      <li class="breadcrumb-item active">4 - Simplificació en Kotlin</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="4-simplificacio-en-kotlin">4 - Simplificació en Kotlin</h1>
<p>Tots els programes anteriors funcionen en Kotlin perfectament, perquè estem
utilitzant les classes de Java, i aquestes sense problemes funcionen en
Kotlin, és una de les seues característiques.</p>
<p>Tanmateix, Kotlin proporcionarà funcionalitat extra en les classes, que ens
permetrà simplificar prou els programes. Són molts els mètodes nous que ens
proporcionarà. Ací tenim uns quants agrupats per temàtica.</p>
<p><code>Mètodes sobre bytes</code></p>
<ul>
<li><strong>readBytes()</strong> : torna un <strong>ByteArray</strong> amb tots els bytes del fitxer, és a dir, tot el seu contingut en forma de bytes</li>
<li><strong>writeBytes(<em>array</em> : ByteArray)</strong> : escriu en el fitxer el contingut del ByteArray. Si el fitxer ja existia, el sobreescriura.</li>
<li><strong>appendBytes</strong><strong>(<em>array</em> : ByteArray)</strong> : afegeix al final del fitxer els bytes del ByteArray.</li>
</ul>
<p>Tornem a fer el primer exemple, Exemple_2_01.kt, utilitzant aquesta
funcionalitat extra. Copieu el següent com <strong>Exemple_2_01_bis.kt</strong> :</p>
<pre><code>package exemples

import java.io.File

fun main(){
    val f = File("f1.txt")
    val tot = f.readBytes()
    for (c in tot){
        println(c.toChar())
    }
}
</code></pre>
<p>I com a exemple d'escriptura, podem fer Exemple_2_11.kt,on ho podem fer tot en
una línia. Copieu el següent com <strong>Exemple_2_11_bis.kt</strong> :</p>
<pre><code>package exemples

import java.io.File

fun main() {
    val text = "Contingut per al fitxer."
    File("f3.txt").writeBytes(text.toByteArray())
}
</code></pre>
<p>Recordeu que en els dos exemples anteriors per comoditat estem utilitzant
caràcters com a dades, i no seria el més correcte utilitzar bytes ni de
lectura ni d'escriptura. Ho hem fet únicament per comoditat.  </p>
<p><code>Mètodes sobre caràcters</code></p>
<ul>
<li><strong>readText(<em>charset</em> : CharSet)</strong>: torna un String amb la tots els caràcters del fitxer. Opcionalment li podem dir el joc de caràcters (si no li ho diem utilitzarà UTF-8)</li>
<li><strong>readLines(<em>charset</em> : CharSet)</strong>: torna un List de Strings amb totes les línies del fitxer</li>
<li><strong>writeText(<em>text</em> : String, <em>charset</em> : CharSet)</strong>: escriu el string en el fitxer. Si el fitxer ja existia el sobreescriurà. Opcionalment podem posar el joc de caràcters que volem utilitzar. Si no el posem utilitzarà UTF-8. Observeu que ja disposàvem d'un mètode que escrivia tot un String anteriorment, per tant no és una gran millora, excepte pel fet de poder especificar el joc de caràcters. Açò sí que és de gran comoditat.</li>
<li><strong>appendText(<em>text</em> : String, <em>charset</em> : CharSet)</strong>: el mateix que l'anterior, però afegint al final.</li>
</ul>
<p>Com a exemple anem a veure Exemple_2_21.kt. Copieu el següent com
<strong>Exemple_2_21_bis.kt</strong> :</p>
<pre><code>package exemples

import java.io.File

fun main(){
    val tot = File("f1.txt").readText()
    for(c in tot){
        println(c)
    }
}
</code></pre>
<p>I com a exemple d'escriptura, l'adaptació de Exemple_2_31.kt. Copieu el
següent com <strong>Exemple_2_31_bis.kt</strong> :</p>
<pre><code>package exemples

import java.io.File

fun main() {
    val text = "Contingut per al fitxer. Ara ja sense por a caràcters especials: ç, à, ú, ..."
    File("f5.txt").writeText(text)
}
</code></pre>
<p>I com a exemple de copiar un fitxer en un altre, fins i tot canviant el joc de
caràcters, farem una altra versió del Exemple_2_61.kt. Copieu el següent com
<strong>Exemple_2_61_bis.kt</strong> :</p>
<pre><code>package exemples

import java.io.File

fun main() {
    File("f5_2.txt").writeText(File("f5.txt").readText(), Charsets.ISO_8859_1)
}
</code></pre>
<p><code>Mètodes de conversió</code></p>
<p>En ocasions és possible que no tinguem un mètode directament en File que ens
vinga bé. Un exemple són els mètodes print (print, println, printf).
Aleshores, senzillament a partir del File la classe que ens convinga de la
jerarquia de InputStream/OutputStream o Reader/Writer. Són mètodes que ens
tornen la classe desitjada:</p>
<ul>
<li><strong>inputStream()</strong> : construeix in un InputStream que apunta al File, i el torna</li>
<li><strong>inputStream()</strong> : el mateix amb un OutputStream</li>
<li><strong>reader(<em>charset</em> : Charset)</strong>: el mateix amb un Reader, tenint la possibilitat d'especificar el joc de caràcters (si no s'especifica serà UTF-8)</li>
<li><strong>writer(<em>charset</em> : Charset)</strong>: el mateix amb un Writer</li>
<li><strong>bufferedReader(<em>charset</em> : Charset)</strong>: el mateix amb un BufferedReader</li>
<li><strong>printWriter(<em>charset</em> : Charset)</strong>: el mateix amb un Writer</li>
</ul>
<p>Per exemple, el que hem comentat més amunt: si volem els mètodes print,
senzillament obtenim un <strong>PrintWriter</strong> a partir del File. D'aquesta manera,
el Exemple_2_41.kt ens quedaria d'una altra manera per a obtenir el
PrintWriter que volíem. Copieu el següent com <strong>Exemple_2_41_bis.kt</strong> :</p>
<pre><code>package exemples

import java.io.File

fun main() {
    val f_out = File("f6.txt").printWriter()

    val a = 5.25.toFloat()
    val b = "Hola."
    f_out.print(b)
    f_out.println("Què tal?")
    f_out.println(a + 3)
    f_out.printf("El número %d en hexadecimal és %x", 27, 27)

    f_out.close();
}
</code></pre>
<p><code>Altres mètodes</code></p>
<p>Hi ha altres mètodes que poden ser molt útils. Per exemple aquell que copia
directament un fitxer, o tot un directori recursivament, o que esborra
recursivament, ...</p>
<ul>
<li><strong>copyTo(<em>destí</em> : File, <em>sobre_escriure</em> : Boolean, <em>buffer</em> : Int)</strong>: copia en el fitxer de destí. Per defecte no sobreescriurà, a no ser que posem true en el segon paràmentre. El tercer paràmetre és per a marcar la grandària del buffer de dades per a fer la còpia.</li>
<li><strong>copyRecursively(</strong><strong><em>destí</em> : File, <em>sobre_escriure</em> : Boolean)</strong>: copia recursivament el File i tots els seus descendents en el File de destí. Per defecte no sobreescriurà, a menys que posem true en el segon paràmentre. Opcionalment es pot posar un tercer paràmetre per al tractament dels possibles errors</li>
<li><strong>deleteRecursively():</strong> esborra el file i tots els seus possibles descendents</li>
</ul>
<p>També hi ha altres mètodes, com per exemple per a comprovar si el nom del File
té extensió, o si comença o finalitza igual que un altre, o per a normalitzar
la ruta (llevar possibles redundàncies), i altre més.</p>
<p>Es poden consultar totes les extensions que proporciona Kotline a la classe
File en:</p>
<p>https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.io/java.io.-file/</p>
<p>Llicenciat sota la  <a href="http://creativecommons.org/licenses/by-nc-sa/2.5/">Llicència Creative Commons Reconeixement NoComercial
CompartirIgual 2.5</a></p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../33__conversors_inputstreamreader_i_outputstreamwriter/" class="btn btn-neutral float-left" title="3.3 - ConversorsInputStreamReader i OutputStreamWriter"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../exercicis/" class="btn btn-neutral float-right" title="Exercicis">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../33__conversors_inputstreamreader_i_outputstreamwriter/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../exercicis/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
